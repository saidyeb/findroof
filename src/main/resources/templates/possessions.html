<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/global-head::global-head">	
	<meta charset="utf-8">
	<title> Mes annonces </title>
</head>

<header th:replace="fragments/header::header"></header>

<body>
	<div class="container mt-5 pt-5 mb-5 pb-5">
		<div class="row" th:if="${possessionOwning.isEmpty()}">
			<h4>Vous n'avez pas encore publier des annonces</h4>
		</div>
		<div class="row" th:if="${possessionHolding.isEmpty()}">
			<h4>Vous n'avez pas encore des réservations</h4>
		</div>
		<div class="row" th:if="${#strings.equalsIgnoreCase(person.role,'Propritaire') or #strings.equalsIgnoreCase(person.role,'Propritaire/Locataire')}">
			<form th:action="@{/addpossessions}">
            	<input class="btn btn-primary navbar-btn" type="submit" value="Ajouter un bien">
        	</form>
		</div>

		<!-- liste des biens  pour un poroprio-->
		<div class="row" th:if="${!possessionOwning.isEmpty()}">
			<div class="col-12">
				<h4 class="row border-bottom border-dark pb-2">Mes biens publiés</h4>
				<div class="row">
					<div class="col-4 mt-1 mb-1" th:each="possession: ${possessionOwning}">
						<div class="card">
						  <div class="card-body">
						    <h5 class="card-title" th:text="${possession.name}"></h5>
						    <h6 class="card-subtitle mb-3 text-muted" th:text="${possession.type}"></h6>
						    <div class="card-text">
								<p class="mb-0">
									<b>Description : </b>
									<label class="mb-0 text-muted" th:text="${possession.description}"></label>
								</p>
								<p class="mb-0">
									<b>Adresse : </b>
									<label class="mb-0" th:text="${possession.address.toFrString()}"></label>
								</p>
								<p class="mb-0">
									<b>Surface : </b>
									<label class="mb-0" th:text="${possession.surface} + 'm²'"></label>
								</p>
								<p class="mb-0">
									<b>Nombre max locataire : </b>
									<label class="mb-0" th:text="${possession.maxPerson}"></label>
								</p>
								<p class="mb-0">
									<b>Les locataires : </b>
									<div th:each="holder: ${possession.houseHolders}">
										<label class="mb-0" th:text="' - '+${holder.firstName} + ${holder.lastName}"></label>
									</div>
								</p>
						    </div>
						  </div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
		<!-- liste des biens  que la personne a reservée-->
		<div class="row" th:if="${!possessionHolding.isEmpty()}">
			<div class="col-12">
				<h4 class="row border-bottom border-dark pb-2">Ma liste de resérvation (validés)</h4>
				<div class="row">
					<div class="col-4 mt-1 mb-1" th:each="possession: ${possessionHolding}">
						<div class="card">
						  <div class="card-body">
						    <h5 class="card-title" th:text="${possession.name}"></h5>
						    <h6 class="card-subtitle mb-3 text-muted" th:text="${possession.type}"></h6>
						    <div class="card-text">
								<p class="mb-0">
									<b>Description : </b>
									<label class="mb-0 text-muted" th:text="${possession.description}"></label>
								</p>
								<p class="mb-0">
									<b>Adresse : </b>
									<label class="mb-0" th:text="${possession.address.toFrString()}"></label>
								</p>
								<p class="mb-0">
									<b>Surface : </b>
									<label class="mb-0" th:text="${possession.surface} + 'm²'"></label>
								</p>
								<p class="mb-0">
									<b>Propriétaire : </b>
									<label class="mb-0" th:text="${possession.houseOwner.firstName} + ${possession.houseOwner.lastName}"></label>
								</p>
						    </div>
						  </div>
						</div>
					</div>
				</div>
			</div>
		</div>
		
	</div>
</body>

<footer th:replace="fragments/footer::footer"></footer>

</html>